<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<ScrollPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.bschooleventmanager.eventmanager.controller.client.ClientHistoriqueReservationsController"
            fitToWidth="true" 
            vbarPolicy="AS_NEEDED" 
            hbarPolicy="NEVER"
            pannable="false"
            style="-fx-background-color: #f8f9fa; -fx-background: #f8f9fa;">
    <content>

    <VBox spacing="25" style="-fx-background-color: #f8f9fa;">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>

        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="20">
            <Label text="ðŸ“‹ Mes RÃ©servations" 
                   style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <Button fx:id="refreshButton" 
                    text="ðŸ”„ Actualiser"
                    onAction="#handleRefresh"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-background-radius: 6; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 10 15 10 15;"/>
        </HBox>

        <Separator style="-fx-background-color: #bdc3c7;"/>

        <!-- Filtres et statistiques -->
        <HBox spacing="20" alignment="CENTER_LEFT">
            <Label text="Filtrer par statut :" style="-fx-font-weight: bold; -fx-text-fill: #34495e;"/>
            <ComboBox fx:id="statusFilter" promptText="Tous les statuts" prefWidth="150"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <Label fx:id="totalReservationsLabel" 
                   text="Total: 0 rÃ©servations" 
                   style="-fx-font-weight: bold; -fx-text-fill: #27ae60; -fx-font-size: 14px;"/>
        </HBox>

        <!-- Message d'information si aucune rÃ©servation -->
        <VBox fx:id="noReservationsContainer" spacing="15" alignment="CENTER" visible="false" managed="false"
              styleClass="card-light-shadow" style="-fx-padding: 40;">
            
            <Label text="ðŸ“" style="-fx-font-size: 48px;"/>
            <Label text="Aucune rÃ©servation trouvÃ©e" 
                   style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #7f8c8d;"/>
            <Label text="Vos futures rÃ©servations apparaÃ®tront ici." 
                   style="-fx-font-size: 14px; -fx-text-fill: #95a5a6;"/>
            
            <Button text="ðŸŽ« Voir les Ã©vÃ©nements disponibles"
                    onAction="#handleGoToEvents"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-background-radius: 6; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 12 20 12 20; -fx-font-size: 14px;"/>
        </VBox>

        <!-- Liste des rÃ©servations -->
        <VBox fx:id="reservationsContainer" spacing="15">
            <!-- Les cartes de rÃ©servations seront ajoutÃ©es dynamiquement ici -->
        </VBox>

        <!-- Message de chargement -->
        <VBox fx:id="loadingContainer" spacing="10" alignment="CENTER" visible="true" managed="true"
              style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 30;">
            
            <ProgressIndicator prefWidth="40" prefHeight="40"/>
            <Label text="Chargement de vos rÃ©servations..." 
                   style="-fx-font-size: 16px; -fx-text-fill: #7f8c8d;"/>
        </VBox>

        <!-- Message d'erreur -->
        <VBox fx:id="errorContainer" spacing="15" alignment="CENTER" visible="false" managed="false"
              style="-fx-background-color: #ffe6e6; -fx-background-radius: 10; -fx-padding: 20; -fx-border-color: #e74c3c; -fx-border-radius: 10; -fx-border-width: 2;">
            
            <Label text="âŒ" style="-fx-font-size: 32px;"/>
            <Label fx:id="errorMessageLabel" 
                   text="Erreur lors du chargement des rÃ©servations" 
                   style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #c0392b;"/>
            
            <Button text="â†» RÃ©essayer"
                    onAction="#handleRefresh"
                    style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-background-radius: 6; -fx-font-weight: bold; -fx-cursor: hand; -fx-padding: 8 16 8 16;"/>
        </VBox>

        </VBox>
    </content>
</ScrollPane>